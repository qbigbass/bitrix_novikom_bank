---
import DropDownMenu from "@components/ui/DropDownMenu/DropDownMenu.astro";

interface Props {
	class?: string,
}

const {
	class: className,
	...rest
} = Astro.props as Props;
---
<script>
	import moveLinksToDropDownMenu from "../../../js/moveLinksToDropDownMenu";
	import moveActiveLink from "./index";

	moveLinksToDropDownMenu('.js-desktop-main-menu', 'body-s-light');
	moveActiveLink();

	window.addEventListener('resize', () => {
		moveLinksToDropDownMenu('.js-desktop-main-menu', 'body-s-light');
	});
</script>

<nav class="desktop-main-menu" class:list={className} {...rest}>
	<div class="desktop-main-menu__links js-desktop-main-menu">
		<a class="desktop-main-menu-link body-s-light " href="#">Частным клиентам</a>
		<a class="desktop-main-menu-link body-s-light js-desktop-move-link is-active" href="#">Корпоративным клиентам</a>
		<a class="desktop-main-menu-link body-s-light js-desktop-move-link" href="#">МСБ</a>
		<DropDownMenu>
			<a class="drop-down-menu__link" href="#">Финансовым институтам</a>
			<a class="drop-down-menu__link " href="#">О банке</a>
			<a class="drop-down-menu__link " href="#">Помощь</a>
			<a class="drop-down-menu__link" href="#">English version</a>
		</DropDownMenu>
	</div>
</nav>

<style lang="scss" is:global>
	@use "sass:map";
	@import "@styles/variables";
	@import "@styles/media-queries";

	.desktop-main-menu {

		&__links {
			display: flex;
			align-items: center;
			gap: .5rem;

			@include use-media(laptop) {
				gap: 1.5rem;
			}

			@include use-media(desktop) {
				gap: 2.5rem;
			}
		}

		& .drop-down-button {
			height: calc(3rem - 2px);
		}
	}

	.desktop-main-menu-link {
		$border-width: 1px;

		padding-top: 1em;
		padding-bottom: calc(1em - #{$border-width});
		white-space: nowrap;
		color: var(--dark-100);
		text-decoration: none;
		box-sizing: border-box;
		transition: color ease .33s;
		position: relative;

		&:hover {
			color: var(--blue-100);
		}

		&.is-active {
			color: var(--violet-100);
			pointer-events: none;

			&:after {

				@include use-media(laptop-x) {
					content: '';
					position: absolute;
					left: 0;
					right: 0;
					top: 100%;
					height: $border-width;
					background-color: currentColor;
				}
			}
		}
	}
</style>
