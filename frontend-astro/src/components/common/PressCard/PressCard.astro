---
import ATag from '@components/ui/ATag/ATag.astro';
import AIcon from "../../AIcon.astro";
import PatternBg from "../Pattern/PatternBg.astro";

interface Props {
    href?: string;
    label?: string;
    image?: string;
    isPinned?: false;
    date: string;
    title: string;
}

const {
    href = '#',
    label = 'Пресс-центр',
    isPinned = false,
    image,
    date,
    title,
} = Astro.props as Props;
---
<a class="press-card" href="#">
    <div class="press-card__cover">
        <PatternBg class="press-card__pattern"/>
        {
            image && (
                <img src={image} alt={title}/>
            )
        }
    </div>
    <div class="press-card__content">
        <div class="press-card__head">
            <ATag>{label}</ATag>
            {
                isPinned && (
                    <div class="press-card__pin">
                        <AIcon class="press-card__pin-icon" symbolId="icon-pin" size="m"/>
                    </div>
                )
            }
        </div>
        <div class="press-card__title">
            <p class="body-s-light press-card__date">{date}</p>
            <h4 class="headline-4" set:html={title} />
        </div>
    </div>

</a>


<style lang="scss" is:global>
    @import "@styles/media-queries";

    .press-card {
        $root: #{&};
        position: relative;
        text-decoration: none;
        color: inherit;
        display: block;
        border-radius: 0.75rem;
        overflow: hidden;
        background-color: var(--dark-10);
        height: 100%;

        &:has(#{$root}__cover img) #{$root}__content {
            padding-top: 1rem;

            @include use-media(tablet) {
                padding-top: 1.5rem;
            }
        }

        &__cover {
            position: relative;

            &:not(:has(> img)) {
                position: absolute;
                height: 6.25rem;
                left: 0;
                right: 0;

                @include use-media(tablet) {
                    position: relative;
                    height: auto;
                    left: initial;
                    right: initial;
                }
            }

            &:has(> img) {
                @include use-media(tablet) {
                    &::before {
                        content: "";
                        display: block;
                        width: 100%;
                        position: absolute;
                        height: 80px;
                        background: linear-gradient(180deg, rgba(18, 17, 18, 0.5) 0%, rgba(18, 17, 18, 0) 100%);
                        z-index: 2;
                    }
                }
            }

            @include use-media(tablet) {
                aspect-ratio: 328 / 160;
            }

            @include use-media(tablet-album) {
                aspect-ratio: 500 / 240;
            }

            > img {
                position: relative;
                z-index: 1;
                display: block;
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
        }

        &__pattern {
            z-index: 0;
        }

        &__head {
            display: flex;
            justify-content: space-between;
            z-index: 3;

            @include use-media(tablet) {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                padding: 1rem;
                align-items: flex-start;
            }
        }

        &__content {
            position: relative;
            z-index: 1;
            padding: 1.5rem 1rem 1.5rem;
            display: grid;
            gap: 1.125rem;

            @include use-media(tablet) {
                position: initial;
                padding: 1.5rem 2rem 2rem;
            }

            @include use-media(tablet-album) {
                padding: 1.5rem 2.5rem 2.5rem;
            }
        }

        &__title {
            display: grid;
            gap: .5rem;

            @include use-media(tablet) {
                gap: 1rem;
            }
        }

        &__date {
            color: var(--dark-70);
        }

        &__pin {
            color: var(--blue-100);

            @include use-media(tablet) {
                border-radius: .25rem;
                background-color: var(--dark-0);
                width: 2.5rem;
                height: 2.5rem;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }
    }
</style>
