---
import AAccordionContent from "../ui/AAccordion/AAccordionContent.astro";
import AAccordionPanel from "../ui/AAccordion/AAccordionPanel.astro";
import AAccordionHeader from "../ui/AAccordion/AAccordionHeader.astro";
import AButton from "../ui/Buttons/AButton.astro";
import AAccordion from "../ui/AAccordion/AAccordion.astro";
import HeaderContactLink from "../header/HeaderContactLink.astro";
import SliderSkeleton from "../common/SliderSkeleton.astro";
import MobileSearch from "./MobileSearch.astro";
---

<div class="mobile-menu">
    <div class="mobile-menu__header">
        <SliderSkeleton
                data-space-between="mobile-s:16,mobile:16,tablet:16,laptop:16"
                data-slides-per-view="mobile-s:auto,mobile:auto,tablet:auto,laptop:auto"
                data-active-on-mq="mobile-s"
        >
            <div class="swiper-slide">
                <a href="#" class="bosy-s-light is-active">Частным клиентам</a>
            </div>
            <div class="swiper-slide">
                <a href="#" class="bosy-s-light">Корпоративным клиентам</a>
            </div>
            <div class="swiper-slide">
                <a href="#" class="bosy-s-light">МСБ</a>
            </div>
            <div class="swiper-slide">
                <a href="#" class="bosy-s-light">Финансовым институтам</a>
            </div>
            <div class="swiper-slide">
                <a href="#" class="bosy-s-light">О банке</a>
            </div>
        </SliderSkeleton>
    </div>
    <div class="mobile-menu__body js-mobile-menu-body">
        <MobileSearch />

        <div class="mobile-menu__nav">
            <AAccordion type="component">
                <AAccordionPanel>
                    <AAccordionHeader>
                        <span class="mobile-menu__title">Карты</span>
                    </AAccordionHeader>
                    <AAccordionContent>
                        <div class="mobile-submenu">
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Все карты НОВИКОМ</a>
                                <a href="#" class="mobile-submenu__link">Кредитные карты</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты</a>
                            </div>
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Блокировка карт</a>
                                <a href="#" class="mobile-submenu__link">«Программа Кешбек»</a>
                                <a href="#" class="mobile-submenu__link">«Программа Бонусы»</a>
                                <a href="#" class="mobile-submenu__link">«Бонусная копилка»</a>
                            </div>
                        </div>
                    </AAccordionContent>
                </AAccordionPanel>
                <AAccordionPanel>
                    <AAccordionHeader>
                        <span class="mobile-menu__title">Вклады</span>
                    </AAccordionHeader>
                    <AAccordionContent>
                        <div class="mobile-submenu">
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 1</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 1</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 1</a>
                                <a href="#" class="mobile-submenu__link">Блокировка карт 1</a>
                            </div>
                        </div>
                    </AAccordionContent>
                </AAccordionPanel>
                <AAccordionPanel>
                    <AAccordionHeader>
                        <span class="mobile-menu__title">Кредиты</span>
                    </AAccordionHeader>
                    <AAccordionContent>
                        <div class="mobile-submenu">
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 2</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 2</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 2</a>
                                <a href="#" class="mobile-submenu__link">Блокировка карт 2</a>
                            </div>
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 2</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 2</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 2</a>
                                <a href="#" class="mobile-submenu__link">Блокировка карт 2</a>
                            </div>
                        </div>
                    </AAccordionContent>
                </AAccordionPanel>
                <AAccordionPanel>
                    <AAccordionHeader>
                        <span class="mobile-menu__title">Ипотека</span>
                    </AAccordionHeader>
                    <AAccordionContent>
                        <div class="mobile-submenu">
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 3</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 3</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 3</a>
                                <a href="#" class="mobile-submenu__link">Блокировка карт 3</a>
                            </div>
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 3</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 3</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 3</a>
                            </div>
                        </div>
                    </AAccordionContent>
                </AAccordionPanel>
                <AAccordionPanel>
                    <AAccordionHeader>
                        <span class="mobile-menu__title">Платежи и переводы</span>
                    </AAccordionHeader>
                    <AAccordionContent>
                        <div class="mobile-submenu">
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 4</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 4</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 4</a>
                                <a href="#" class="mobile-submenu__link">Блокировка карт 4</a>
                            </div>
                        </div>
                    </AAccordionContent>
                </AAccordionPanel>
                <AAccordionPanel>
                    <AAccordionHeader>
                        <span class="mobile-menu__title">Онлайн-сервисы</span>
                    </AAccordionHeader>
                    <AAccordionContent>
                        <div class="mobile-submenu">
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 5</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 5</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 5</a>
                                <a href="#" class="mobile-submenu__link">Блокировка карт 5</a>
                            </div>
                        </div>
                    </AAccordionContent>
                </AAccordionPanel>
                <AAccordionPanel>
                    <AAccordionHeader>
                        <span class="mobile-menu__title">Услуги</span>
                    </AAccordionHeader>
                    <AAccordionContent>
                        <div class="mobile-submenu">
                            <div class="mobile-submenu__col">
                                <a href="#" class="mobile-submenu__link">Кредитные карты 6</a>
                                <a href="#" class="mobile-submenu__link">Дебетовые карты 6</a>
                                <a href="#" class="mobile-submenu__link">Зарплатные карты 6</a>
                                <a href="#" class="mobile-submenu__link">Блокировка карт 6</a>
                            </div>
                        </div>
                    </AAccordionContent>
                </AAccordionPanel>
            </AAccordion>
        </div>

        <div class="mobile-menu__bank-apps">
            <AButton
                    element="a"
                    size="m"
                    href="#"
                    target="_blank"
                    outline
                    beforeIcon="icon-download">
                Мобильное приложение
            </AButton>
            <AButton
                    element="a"
                    size="m"
                    href="#"
                    target="_blank">
                Онлайн-банк
            </AButton>
        </div>
        <div class="mobile-menu__bank-contact">
            <HeaderContactLink
                    href="#"
                    beforeIcon="icon-point">
                Офисы и банкоматы
            </HeaderContactLink>
            <HeaderContactLink
                    href="tel:+78002507007"
                    beforeIcon="icon-mobile">
                +7 800 250-70-07
            </HeaderContactLink>
        </div>
    </div>
</div>

<style lang="scss" is:global>
  @use "sass:map";
  @import "@styles/placeholders";
  @import "@styles/media-queries";
  @import "@styles/variables";

  .mobile-menu {
    $root: #{&};

    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 2rem .25rem 1.5rem 1rem;

    @include use-media(tablet) {
      gap: 2.5rem;
      padding-left: 2.5rem;
      padding-right: .5rem;
    }

    &__header {
      margin-left: -1rem;
      margin-right: -.25rem;
      position: relative;

      @include use-media(tablet) {
        margin-left: -2.5rem;
        margin-right: -.5rem;
      }

      &:after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 1px;
        background-color: var(--blue-30);
      }

      & a {
          @extend %reset-link;

          white-space: nowrap;
          color: var(--dark-100);
          padding: 1em 0;
          display: inline-block;

          &:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background-color: currentColor;
            opacity: 0;
            visibility: hidden;
          }

          &.is-active {
            color: var(--violet-100);

            &:after {
              opacity: 1;
              visibility: visible;
            }
          }
      }

      & .swiper-slide {
        width: auto;

        &:first-child a {
          padding-left: 1rem;

          @include use-media(tablet) {
            padding-left: 2.5rem;
          }

          &:after {
            left: 1rem;

            @include use-media(tablet) {
              left: 2.5rem;
            }
          }
        }

        &:last-child a {
          padding-right: 1rem;

          @include use-media(tablet) {
            padding-right: 2.5rem;
          }

          &:after {
            right: 1rem;

            @include use-media(tablet) {
              right: 2.5rem;
            }
          }
        }
      }

      & .slider-skeleton__controls {
        display: none;
      }
    }

    &__body {
      grid-area: body;
      overflow: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      padding-right: .75rem;

      @include use-media(tablet) {
        gap: 1.5rem;
        padding-right: 2rem;
      }

      &::-webkit-scrollbar {
        width: .25rem;
        background-color: transparent;
      }

      &::-webkit-scrollbar-thumb {
        border-radius: .5rem;
        background-color: var(--dark-70);
      }

      &.is-active-search {
        #{$root}__bank-apps,
        #{$root}__nav,
        #{$root}__bank-contact {
          display: none;
        }
      }
    }

    &__bank-apps,
    &__bank-contact {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;

      @include use-media(tablet) {
        flex-direction: row;
        gap: 1rem;
        align-items: center;

        & > * {
          flex: 0 0 calc(50% - .5rem);
        }
      }
    }

    &__bank-contact {
      margin-top: .5rem;

      @include use-media(tablet) {
        order: 10;
        margin: 1rem 0;
      }

      & .header-contact-link__icon {
        display: block;
      }
    }

    &__bank-apps {
      @include use-media(tablet) {
        order: 11;
      }
    }

    &__title {
      font-weight: 600;
      font-size: 1rem;
      line-height: 1.5;
      color: var(--violet-100);

      @at-root .is-expanded & {
        color: var(--blue-100);
      }

      @include use-media(tablet) {
        font-size: 1.125rem;
        line-height: 1.35;
      }
    }

    &__nav {
      & .a-accordion.a-accordion-component .a-accordion-panel .a-accordion-content {
        padding: 0;
      }
    }
  }

  .mobile-submenu {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;

    @include use-media(tablet) {
      flex-direction: row;
      gap: 2rem
    }

    &__col {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;

      @include use-media(tablet) {
        flex: 0 0 calc(50% - 1rem);
      }
    }

    &__link {
      @extend %reset-link;

      color: var(--violet-100);
      font-weight: 600;
      font-size: .875rem;
      line-height: 1.3;

      @include use-media(tablet) {
        font-size: 1rem;
        line-height: 1.5;
      }
    }
  }
</style>
