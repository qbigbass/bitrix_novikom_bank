---
import AIcon from "../../AIcon.astro";
import type { Props } from "./types";

const {
	class: className,
	element: Element = "button",
	color = "primary",
	size = "m",
	full,
	outline,
	beforeIcon,
	afterIcon,
	text,
	afterIconClass,
	beforeIconClass,
	...rest
} = Astro.props as Props;

const sizeClass = `a-button--${size}`;
const colorClass = `a-button--${color}`;

const isLink = Element.toLocaleLowerCase() === "a";
---

<Element
	class="a-button"
	class:list={[
		className,
		sizeClass,
		colorClass,
		{ "a-button--full": full },
		{ "a-button--link": isLink },
		{ "a-button--outline": outline },
		{ "a-button--text": text },
	]}
	{...rest}
>
	{beforeIcon && <AIcon symbolId={beforeIcon} class:list={['a-button__icon', beforeIconClass]} />}
	<slot />
	{afterIcon && <AIcon symbolId={afterIcon} class:list={['a-button__icon', afterIconClass]} />}
</Element>

<style lang="scss" is:global>
	@use "sass:map";
	@import "@styles/variables";
	@import "@styles/placeholders";
	@import "@styles/functions";

	.a-button {
		display: inline-flex;
		justify-content: center;
		align-items: center;
		border: 1px solid transparent;
		border-radius: 0.25rem;
		cursor: pointer;

		&__icon {
			display: flex;
			place-content: center;
			flex-shrink: 0;

			svg {
				width: 100%;
				height: 100%;
			}
		}
	}

	//COLORS
	.a-button.a-button--primary {
		background-color: var(--violet-100);
		color: var(--dark-0);
	}

	.a-button.a-button--secondary {
		background-color: var(--blue-100);
		color: var(--dark-0);
	}

	.a-button.a-button--white {
		background-color: var(--dark-0);
		color: var(--violet-100);
	}

	.a-button.a-button--green {
		background-color: var(--green-100);
		color: var(--dark-0);
	}

	.a-button.a-button--yellow {
		background-color: var(--yellow-100);
		color: var(--dark-100);
	}

	.a-button.a-button--transparent {
		background-color: transparent;
		color: inherit;
	}

	//OUTLINE COLORS
	.a-button.a-button--primary.a-button--outline {
		background-color: transparent;
		border-color: var(--violet-100);
		color: var(--violet-100);
	}

	//SIZES
	.a-button.a-button--l {
		gap: 1rem;
		padding: 0.938rem 1.938rem;
		font-size: 18px;
		font-weight: 700;
		line-height: 135%;
		min-height: 1.75rem;

		.a-button__icon {
			width: 1.5rem;
			height: 1.5rem;
		}
	}

	.a-button.a-button--lm {
		gap: 0.5rem;
		padding: 0.438rem 1.438rem;
		font-size: 1rem;
		font-weight: 600;
		line-height: 120%;
		min-height: 2.5rem;

		.a-button__icon {
			width: 1.5rem;
			height: 1.5rem;
		}

		@include use-media(tablet-album) {
			gap: 1rem;
			padding: 0.938rem 1.938rem;
			font-size: 1.125rem;
			font-weight: 700;
			line-height: 135%;
		}
	}

	.a-button.a-button--ls {
		gap: 0.5rem;
		padding: 0.313rem 0.938rem;
		font-size: 0.813rem;
		font-weight: 600;
		line-height: 120%;

		.a-button__icon {
			width: 1rem;
			height: 1rem;

			@include use-media(tablet) {
				width: 1.5rem;
				height: 1.5rem;
			}
		}

		@include use-media(tablet) {
			gap: 1rem;
			padding: 1.438rem 1.938rem;
			font-weight: 700;
			font-size: 1.125rem;
			line-height: 135%;
		}
	}

	.a-button.a-button--m {
		gap: 0.5rem;
		padding: 0.438rem 1.438rem;
		font-size: 16px;
		font-weight: 700;
		line-height: 125%;
		min-height: 2.5rem;

		.a-button__icon {
			width: 1.5rem;
			height: 1.5rem;
		}
	}

	.a-button.a-button--ms {
		gap: 0.5rem;
		padding: 0.313rem 0.438rem;
		font-size: 0.813rem;
		font-weight: 600;
		line-height: 120%;
		min-height: 1.75rem;

		.a-button__icon {
			width: 1rem;
			height: 1rem;

			@include use-media(tablet) {
				width: 1.5rem;
				height: 1.5rem;
			}
		}

		@include use-media(tablet) {
			font-size: 1rem;
			padding: 0.438rem 1.438rem;
			font-weight: 700;
			line-height: 125%;
		}
	}

	.a-button.a-button--s {
		gap: 0.5rem;
		padding: calc(0.375rem - 1px) calc(0.5rem - 1px);
		font-size: 13px;
		font-weight: 600;
		line-height: 120%;
		min-height: 1.75rem;

		.a-button__icon {
			width: 1rem;
			height: 1rem;
		}
	}

	.a-button.a-button--full {
		width: 100%;
	}

	.a-button.a-button--link {
		text-decoration: none;

		&.a-button.a-button--l {
			gap: .5rem;
		}
	}

	.a-button.a-button--text {
		padding: 0;
		border: unset;
		background-color: transparent;
		min-height: unset;
	}

	.a-button.a-button--primary.a-button--text {
		color: var(--violet-100);
	}

	.a-button.a-button--white.a-button--text {
		color: var(--dark-0);
	}
</style>
