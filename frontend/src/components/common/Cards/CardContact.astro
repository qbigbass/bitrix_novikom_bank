---
import AIcon from "@components/AIcon.astro";
import ATag from "@components/ui/ATag/ATag.astro";

import type { Colors } from "@components/ui/ATag/ATag.astro";

type BackgroundColors = "blue" | "gray";
type Tag = {
    text: string;
    color?: Colors;
    outline?: boolean;
};
type List = {
    href?: string;
    text: string;
    icon: string;
};

interface Props {
    class?: string;
    title: string;
    description?: string;
    backgoroundColor: BackgroundColors;
    tag?: Tag;
    list: List[];
}

const {
    class: className,
    backgoroundColor,
    title,
    description,
    tag,
    list,
    ...rest
} = Astro.props as Props;

const tagOutline = tag?.outline ? "outline" : "";

// карточка контактов
---

<div
    class:list={[
        "card-contact",
        `card-contact--bg-${backgoroundColor}`,
        className,
        { ...rest },
    ]}
>
    <div class="card-contact__wrapper">
        {
            tag?.text && (
                <ATag
                    class="card-contact__tag"
                    color={tag.color}
                    outline={tag.outline}
                >
                    {tag.text}
                </ATag>
            )
        }
        <div class="card-contact__header">
            <h3 class="headline-3 card-contact__title" set:html={title} />
            {
                description && (
                    <p
                        class="body-m-light card-contact__description"
                        set:html={description}
                    />
                )
            }
        </div>
        {
            list?.length && (
                <div class="card-contact__body">
                    <div class="card-contact__list">
                        {list.map(({ href, text, icon }) => (
                            <a href={href} class="card-contact__list-item">
                                <AIcon
                                    class="card-contact__icon"
                                    symbolId={icon}
                                    size="m"
                                />
                                <span class="body-l-light">{text}</span>
                            </a>
                        ))}
                    </div>
                </div>
            )
        }
    </div>
</div>

<style lang="scss" is:global>
    @import "@styles/media-queries";

    .card-contact {
        $root: #{&};

        padding: 1.5rem 1rem;
        border-radius: 0.75rem;
        overflow: hidden;

        @include use-media(tablet) {
            padding: 2rem;
        }

        @include use-media(tablet-album) {
            padding: 2.5rem;
        }

        &__wrapper {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            height: 100%;

            @include use-media(tablet) {
                gap: 2.5rem;
            }

            @include use-media(tablet-album) {
                gap: 3rem;
            }
        }

        &__tag {
            margin-bottom: 0;
        }

        &__header {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        &__body {
            margin-top: auto;
        }

        &__list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        &__list-item {
            display: flex;
            gap: 1rem;
            color: currentColor;
            text-decoration: none;
        }

        &--bg-blue {
            background: linear-gradient(42.24deg, #383a74 20%, #2e1b52 80%);
            color: var(--dark-0);

            #{$root}__description {
                opacity: 0.5;
            }
        }

        &--bg-gray {
            background-color: var(--dark-10);
            color: var(--dark-100);

            #{$root}__description {
                color: var(--dark-70);
            }

            #{$root}__icon {
                color: var(--violet-100);
            }
        }

        @at-root .swiper-slide & {
            height: 100%;
        }
    }
</style>
