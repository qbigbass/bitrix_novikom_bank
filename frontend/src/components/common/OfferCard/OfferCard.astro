---
import AButton from "../../ui/Buttons/AButton.astro";
import type { TextIndicatingBenefitsProps } from "../TextIndicatingBenefits";
import TextIndicatingBenefits from "../TextIndicatingBenefits/TextIndicatingBenefits.astro";
export type OfferCardColor = 'green' | 'orange' | 'yellow';

export interface Props {
	color?: OfferCardColor;
	textButton?: string;
    imgSrc: string;
	href?: string;
	class?: string;
	title: string;
	description?: string;
	textIndicating?: TextIndicatingBenefitsProps;
}

const {
	color = 'green',
	textButton = 'Button',
    imgSrc,
	class: className,
	title,
	description,
	href,
	textIndicating,
	...rest
} = Astro.props;

const showTag = !!Astro.slots['tag'];
---

<div
	class="offer-card"
	class:list={[
		className,
		`offer-card--${color}`,
	]}
>
	<div class="offer-card__inner">
		{ showTag && (
			<slot name="tag" />
		)}
		<div class="offer-card__content">
			<div class="offer-card__title headline-3" set:html={title}></div>
			{
				textIndicating && (
					<TextIndicatingBenefits
						headClass="violet-100"
						startText={textIndicating.startText}
						beforeText={textIndicating.beforeText}
						text={textIndicating.text}
						afterText={textIndicating.afterText}
						currency={textIndicating.currency}
					/>
				)
			}
			{
				description && (
					<p class="offer-card__description body-m-light" set:html={description}></p>
				)
			}
		</div>
        <img class="offer-card__img" src={imgSrc} alt="" loading="lazy" />
		<AButton element="a" href={href} size="m" class="offer-card__link">{textButton}</AButton>
	</div>
</div>

<style lang="scss" is:global>
	@import "@styles/media-queries";

	.offer-card {
		position: relative;
		padding: 1.5rem 1rem;
		background-color: var(--dark-10);
		overflow: hidden;
		border-radius: 0.75rem;
		height: 100%;

		&::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 0.5rem;
		}

		&__tag {
			margin-bottom: 0.188rem;

			@include use-media(tablet-album) {
				margin-bottom: -1.313rem;
			}
		}

		&__inner {
			display: flex;
			flex-direction: column;
			gap: 1rem;
			height: 100%;

			@include use-media(tablet) {
				min-height: auto;
			}

			@include use-media(tablet-album) {
				gap: 3rem;
			}
		}

		&__content {
			position: relative;
			display: flex;
			flex-direction: column;
			gap: 0.5rem;
			flex: 1;
			z-index: 1;
		}

		&__description {
			@include use-media(tablet-album) {
				max-width: 60%;
			}

			@include use-media(desktop) {
				max-width: 80%;
			}
		}

		&__link {
			position: relative;
			z-index: 1;

			@include use-media(tablet-album) {
				align-self: flex-start;
			}
		}

		&__img {
			align-self: center;
			width: auto;
			height: 12.5rem;
			width: 12.5rem;

			svg {
				width: 100%;
				height: 100%;
				object-fit: contain;
			}

			@include use-media(tablet-album) {
				position: absolute;
				left: unset;
				transform: unset;
				bottom: -1.5rem;
				right: -1.5rem;
				z-index: 0;
			}

			@include use-media(tablet-album) {
				height: 17.5rem;
				width: 17.5rem;
			}
		}

		&.offer-card--green {
			&::before {
				background-color: var(--green-100);
			}
		}

		&.offer-card--orange {
			&::before {
				background-color: var(--orange-100);
			}
		}

		&.offer-card--yellow {
			&::before {
				background-color: var(--yellow-100);
			}
		}

		@include use-media(tablet) {
			padding: 2rem;
		}

		@include use-media(tablet-album) {
			padding: 2.5rem;
		}
	}
</style>
