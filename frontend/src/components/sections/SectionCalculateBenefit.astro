---
import SectionLayout from "../layouts/SectionLayout.astro";
import AAccordion from "../ui/AAccordion/AAccordion.astro";
import AAccordionPanel from "../ui/AAccordion/AAccordionPanel.astro";
import AAccordionHeader from "../ui/AAccordion/AAccordionHeader.astro";
import AAccordionContent from "../ui/AAccordion/AAccordionContent.astro";
import LoanApplicationForm from "../common/LoanApplicationForm/LoanApplicationForm.astro";
import APolygonContainer from "../common/APolygonContainer/APolygonContainer.astro";
import ATabs from "../ui/ATabs/ATabs.astro";
import ATab from "../ui/ATabs/common/ATab/ATab.astro";
import ASelectInput from "../ui/ASelectInput/ASelectInput.astro";
import ADropDownButton from "../ui/ADropDown/ADropDownButton/ADropDownButton.astro";
import ASliderInput from "../ui/ASliderInput/ASliderInput.astro";
import ACheckbox from "../ui/ACheckbox/ACheckbox.astro";
import ATabSwiper from "../ui/ATabs/common/ATabSwiper/ATabSwiper.astro";
import ATabSwiperWrapper from "../ui/ATabs/common/ATabSwiperWrapper.astro";
import ATabPanels from "../ui/ATabs/common/ATabPanels.astro";
import ATabPanel from "../ui/ATabs/common/ATabPanel.astro";
import CalculatorLayout from "../layouts/CalculatorLayout.astro";
---

<SectionLayout class="section-calculate-benefit">
	<div class="content-container">
		<AAccordion type="layout">
			<AAccordionPanel>
				<AAccordionHeader class="section-calculate-benefit__accordion-header">
					<div class="headline-2">Рассчитайте выгоду</div>
				</AAccordionHeader>
				<AAccordionContent class="section-calculate-benefit__accordion-content">
					<ATabs useLayout>
						<div class="section-calculate-benefit__content">
							<div class="section-calculate-benefit__head">
								<div class="section-calculate-benefit__title headline-2">Рассчитайте выгоду</div>
								<div class="section-calculate-benefit__loan-tabs">
									<ATabSwiper>
										<ATabSwiperWrapper>
											<ATab value="0" size="lm" isActive>Кредит</ATab>
											<ATab value="1" size="lm">Ипотека</ATab>
											<ATab value="2" size="lm">Вклад</ATab>
										</ATabSwiperWrapper>
									</ATabSwiper>
								</div>
							</div>
							<ATabPanels>
								<ATabPanel value="0">
									<CalculatorLayout>
										<Fragment slot="form">
											<div class="section-calculate-benefit__box-content">
												<div class="section-calculate-benefit__types-loan-tabs">
													<div class="section-calculate-benefit__types-loan-tabs-descktop">
														<ATabs>
															<Fragment slot="tabs">
																<ATab size="m" isActive>Потребительский кредит</ATab>
																<ATab size="m">Рефинансирование</ATab>
															</Fragment>
														</ATabs>
													</div>
													<div class="section-calculate-benefit__types-loan-tabs-mobile">
														<ASelectInput size="s" full>
															<ADropDownButton value="Потребительский кредит" selected>Потребительский кредит</ADropDownButton>
															<ADropDownButton value="Рефинансирование">Рефинансирование</ADropDownButton>
														</ASelectInput>
													</div>
												</div>
												<ASliderInput
													id="amount-credit"
													label="Сумма кредита"
													maxValue={5000000}
													minValue={20000}
													startValue={1000000}
													stepSize={5000}
													editable
													type="price"
												/>
												<ASliderInput
													id="credit-term"
													label="Срок кредита"
													maxValue={60}
													minValue={1}
													startValue={31}
													type="month"
													editable
												/>
												<div class="section-calculate-benefit__agreements">
													<ACheckbox id="is-card-novkom" size="m">
														<div class="body-m-light" slot="label">Получаю зарплату на карту НОВИКОМ</div>
													</ACheckbox>
													<ACheckbox id="insurance" size="m" checked>
														<div class="body-m-light" slot="label">Страховка</div>
													</ACheckbox>
												</div>
											</div>
										</Fragment>
										<Fragment slot="card">
											<APolygonContainer size="ls" color="green-100">
												<LoanApplicationForm />
											</APolygonContainer>
										</Fragment>
									</CalculatorLayout>
								</ATabPanel>
								<ATabPanel value="1">
									<div class="section-calculate-benefit__box">
										<div class="section-calculate-benefit__box-content">Ипотека</div>
										<div class="section-calculate-benefit__box-form">Форма ипотеки</div>
									</div>
								</ATabPanel>
								<ATabPanel value="2">
									<div class="section-calculate-benefit__box">
										<div class="section-calculate-benefit__box-content">Вклад</div>
										<div class="section-calculate-benefit__box-form">Форма вклада</div>
									</div>
								</ATabPanel>
							</ATabPanels>
						</div>
					</ATabs>
				</AAccordionContent>
			</AAccordionPanel>
		</AAccordion>
	</div>
</SectionLayout>

<style lang="scss" is:global>
	@import '@styles/media-queries';

	.section-calculate-benefit {
		background-color: var(--dark-10);

		&__accordion-header {
			@include use-media(tablet) {
				display: none;
			}
		}

		&__accordion-content {
			@include use-media(tablet) {
				display: block;
				max-height: unset !important;
			}
		}

		&__content {
			display: flex;
			flex-direction: column;
			gap: 1.5rem;

			@include use-media(tablet) {
				gap: 2.5rem;
			}

			@include use-media(tablet-album) {
				row-gap: 3rem;
				column-gap: 2.5rem;
			}
		}

		&__box {
			display: grid;
			grid-template-columns: 100%;
			gap: 1.5rem;

			@include use-media(tablet) {
				gap: 2.5rem;
			}

			@include use-media(tablet-album) {
				grid-template-columns: 1fr 1fr;
				row-gap: 3rem;
				column-gap: 2.5rem;
			}

			@include use-media(laptop-x) {
				grid-template-columns: repeat(12, 1fr);
			}
		}

		&__box-content {
			display: flex;
			flex-direction: column;
			gap: 1.5rem;

			@include use-media(tablet) {
				gap: 2.5rem;
			}

			@include use-media(tablet-album) {
				gap: 3rem;
				padding-left: 2.5rem;
			}

			@include use-media(laptop-x) {
				grid-column: span 7;
			}
		}

		&__box-form {
			@include use-media(laptop-x) {
				grid-column: span 5;
			}
		}

		&__head {
			display: flex;
			flex-direction: column;
			gap: 1.5rem;
			margin-top: 1.5rem;

			@include use-media(tablet) {
				margin-top: 0;
			}

			@include use-media(tablet-album) {
				padding-left: 2.5rem;
				flex-direction: row;
				justify-content: space-between;
				align-items: center;
			}
		}

		&__title {
			display: none;

			@include use-media(tablet) {
				display: block;
			}
		}

		&__types-loan-tabs-descktop {
			display: none;

			@include use-media(tablet) {
				display: block;
			}
		}

		&__types-loan-tabs-mobile {
			@include use-media(tablet) {
				display: none;
			}
		}

		&__agreements {
			display: flex;
			flex-direction: column;
			gap: 1.5rem;

			@include use-media(tablet) {
				gap: 1rem;
			}
		}

		&__form {
			@include use-media(laptop-x) {
				grid-column: span 5;
			}
		}
	}
</style>
